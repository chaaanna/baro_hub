# 5. 기능: AI 태스크 어시스턴트 (The Modal)

Nexus AI의 핵심 기능(Killer Feature)입니다. 화면을 좌우로 분할하여 왼쪽에는 업무 컨텍스트를, 오른쪽에는 AI 워크스페이스를 배치합니다.

## 📐 레이아웃 아키텍처

**분할 뷰 컴포넌트 구조**
*   **왼쪽 패널 (35-40%):** 고정된 컨텍스트(Context). 제목, 설명, 우선순위 입력 폼이 위치합니다.
    *   *이유:* AI는 항상 현재 업무의 상태를 '참조'해야 하므로 왼쪽 패널은 항상 보여야 합니다.
*   **오른쪽 패널 (60-65%):** 동적 AI 워크스페이스.
    *   *탭(Tab) 구성:* 초안(Draft), 전략(Strategy), 계획(Subtasks), 채팅(Chat).

## 🤖 AI 기능 구현 상세

### 탭 1: 스마트 초안 (생성 모드)
*   **사용자 입력:** "여름 프로모션 기획안 써줘." (거친 아이디어)
*   **서비스 호출:** `geminiService.draftTaskWithAI(input)`
*   **출력:** 3가지 옵션(표준, 상세, 간결)이 담긴 배열 반환.
*   **액션:** 사용자가 카드를 클릭하면 왼쪽 패널의 폼(제목, 설명 등)이 자동으로 채워집니다.

### 탭 2: 전략 분석 (분석 모드)
*   **트리거:** 기존 업무를 클릭하여 모달을 열 때 자동 실행(또는 버튼 클릭).
*   **서비스 호출:** `geminiService.analyzeTaskWithAI(task)`
*   **프롬프트:** Gemini에게 `strategy`(마크다운)와 `resources`(JSON 배열) 필드를 요청.
*   **렌더링:** 마크다운 렌더러를 사용하여 전략 텍스트를 보여주고, 추천 자료는 리스트로 표시합니다.

### 탭 3: 하위 업무 생성 (계획 모드)
*   **사용자 액션:** "AI 생성" 버튼 클릭.
*   **서비스 호출:** `geminiService.generateSubtasksAI(task)`
*   **출력:** `[{ title: "경쟁사 조사" }, { title: "카피라이팅 초안 작성" }]`
*   **상태 관리:** 반환된 하위 업무들을 기존 업무 객체의 `subtasks` 배열에 병합합니다.

### 탭 4: 컨텍스트 채팅 (가이드 모드)
*   **시스템 프롬프트:** `당신은 "${task.title}" 업무 처리를 돕는 어시스턴트입니다.` (업무 컨텍스트 주입)
*   **대화 기록:** 해당 모달 세션 내에서만 유효한 로컬 메시지 배열을 사용합니다.

## 💡 UX 베스트 프랙티스
*   **로딩 상태:** AI가 생각하는 동안 오른쪽 패널 위에 `Backdrop Blur`와 스피너를 띄워 사용자의 조작을 막고 시각적 피드백을 줍니다.
*   **자동 높이 조절:** 왼쪽 패널의 제목/설명 입력창(`textarea`)은 내용이 길어짐에 따라 자동으로 높이가 늘어나도록 `onInput` 이벤트를 처리합니다.
